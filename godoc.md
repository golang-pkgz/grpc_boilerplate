<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# grpc\_boilerplate

```go
import "github.com/golang-pkgz/grpc_boilerplate"
```

## Index

- [Variables](<#variables>)
- [func DialFromConnectionString(connection_string string, opts ...grpc.DialOption) (*grpc.ClientConn, error)](<#func-dialfromconnectionstring>)


## Variables

```go
var DIAL_OPTS_DEFAULT []grpc.DialOption = []grpc.DialOption{
    grpc.WithBlock(),
    grpc.WithInsecure(),
}
```

## func DialFromConnectionString

```go
func DialFromConnectionString(connection_string string, opts ...grpc.DialOption) (*grpc.ClientConn, error)
```

Connect from connectionstring \`h2c|h2cs://\[\<token\>@\]host:port\`

Usage: conn\, err := grpc\_boilerplate\.DialFromConnectionString\(cs\, grpc\_boilerplate\.DIAL\_OPTS\_DEFAULT\)

# log\_duration

```go
import "github.com/golang-pkgz/grpc_boilerplate/log_duration"
```

## Index

- [func ServerLogDuration(logger *log.Logger) grpc.UnaryServerInterceptor](<#func-serverlogduration>)


## func ServerLogDuration

```go
func ServerLogDuration(logger *log.Logger) grpc.UnaryServerInterceptor
```

Log every request duration

<details><summary>Example</summary>
<p>

```go
{
	grpcServer := grpc.NewServer(
		grpc.ChainUnaryInterceptor(
			ServerLogDuration(nil),
		),
	)
	fmt.Println(grpcServer)

}
```

</p>
</details>

# peer\_whitelist

```go
import "github.com/golang-pkgz/grpc_boilerplate/peer_whitelist"
```

## Index

- [func ParseCIDRs(cidrs []string) ([]*net.IPNet, error)](<#func-parsecidrs>)
- [func PeerWhitelist(whitelist []*net.IPNet) grpc.UnaryServerInterceptor](<#func-peerwhitelist>)


## func ParseCIDRs

```go
func ParseCIDRs(cidrs []string) ([]*net.IPNet, error)
```

Shortcut for easy coverting cidrs string slice to net\.IPNet slice

## func PeerWhitelist

```go
func PeerWhitelist(whitelist []*net.IPNet) grpc.UnaryServerInterceptor
```

Server peer whitelist interceptor

<details><summary>Example</summary>
<p>

```go
{
	whitelist_networks, err := ParseCIDRs([]string{
		"127.0.0.1/24",
	})

	if err != nil {
		log.Fatalln("")
	}

	grpcServer := grpc.NewServer(
		grpc.ChainUnaryInterceptor(
			PeerWhitelist(whitelist_networks),
		),
	)
	fmt.Println(grpcServer)

}
```

</p>
</details>

# token\_auth

```go
import "github.com/golang-pkgz/grpc_boilerplate/token_auth"
```

## Index

- [Constants](<#constants>)
- [func ClientTokenAuth(apiToken string, apiTokenHeaderName string) grpc.UnaryClientInterceptor](<#func-clienttokenauth>)
- [func ServerTokenAuth(apiToken string, apiTokenHeaderName string) grpc.UnaryServerInterceptor](<#func-servertokenauth>)


## Constants

Default api token header name\, used if apiTokenHeaderName is empty string

```go
const DefaultApiTokenHeaderName = "api_token"
```

## func ClientTokenAuth

```go
func ClientTokenAuth(apiToken string, apiTokenHeaderName string) grpc.UnaryClientInterceptor
```

Provide token header for authentication

<details><summary>Example</summary>
<p>

Example client with token auth

```go
{
	conn, err := grpc.Dial(
		"localhost:50002",
		grpc.WithBlock(),
		grpc.WithInsecure(),
		grpc.WithUnaryInterceptor(ClientTokenAuth(
			"secret_token",
			"<header name or empty for default>",
		)),
	)
	if err != nil {
		log.Fatalf("dial failed: %s", err.Error())
	}
	defer conn.Close()

}
```

</p>
</details>

## func ServerTokenAuth

```go
func ServerTokenAuth(apiToken string, apiTokenHeaderName string) grpc.UnaryServerInterceptor
```

Provide token header for authentication

<details><summary>Example</summary>
<p>

Example server with token auth

```go
{
	grpcServer := grpc.NewServer(
		grpc.ChainUnaryInterceptor(
			ServerTokenAuth(
				"secret_token",
				"<header name or empty for default>",
			),
		),
	)
	fmt.Println(grpcServer)
}
```

</p>
</details>



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
