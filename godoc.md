<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# grpc\_boilerplate

```go
import "github.com/golang-pkgz/grpc_boilerplate"
```

## Index

- [func DialFromConnectionString(userAgent string, connectionString string, opts ...grpc.DialOption) (*grpc.ClientConn, error)](<#func-dialfromconnectionstring>)


## func DialFromConnectionString

```go
func DialFromConnectionString(userAgent string, connectionString string, opts ...grpc.DialOption) (*grpc.ClientConn, error)
```

Connect to grpc sever from connectionString \`h2c|h2cs://\[\<token\>@\]host:port?\<options\>\` See \`connectionstring\.ParseConnectionString\` for \`options\` description

# connectionstring

```go
import "github.com/golang-pkgz/grpc_boilerplate/connectionstring"
```

## Index

- [func ParseConnectionString(connectionString string) (hostPort string, dialOptions []grpc.DialOption, err error)](<#func-parseconnectionstring>)


## func ParseConnectionString

```go
func ParseConnectionString(connectionString string) (hostPort string, dialOptions []grpc.DialOption, err error)
```

Parse grpc connectionstring \`h2c|h2cs://\[\<token\>@\]host:port\[?ServerCrt=\<path to server cert\>\]\` Attempt to create generic connectionstring format for grpc connections

schema \* h2c: specifies insecure connection \* h2cs: specifies secure connection Optional loads server cert with \`ServerCrt\` query option

token specifies token for token\_auth interceptor

host:port required server address and port

ServerCrt Path to server certificate \(server\.crt\) Works with TLS enabled \(h2cs://\.\.\.\) Has no effect if connection schema is insecure

# log\_duration

```go
import "github.com/golang-pkgz/grpc_boilerplate/log_duration"
```

## Index

- [func ServerLogDuration(logger *log.Logger) grpc.UnaryServerInterceptor](<#func-serverlogduration>)


## func ServerLogDuration

```go
func ServerLogDuration(logger *log.Logger) grpc.UnaryServerInterceptor
```

ServerLogDuration logs every request method\, duration and error

<details><summary>Example</summary>
<p>

```go
{
	grpcServer := grpc.NewServer(
		grpc.ChainUnaryInterceptor(
			ServerLogDuration(nil),
		),
	)
	fmt.Println(grpcServer)

}
```

</p>
</details>

# peer\_whitelist

```go
import "github.com/golang-pkgz/grpc_boilerplate/peer_whitelist"
```

## Index

- [func ParseCIDRs(cidrs []string) ([]*net.IPNet, error)](<#func-parsecidrs>)
- [func ServerPeerWhitelist(whitelist []*net.IPNet) grpc.UnaryServerInterceptor](<#func-serverpeerwhitelist>)


## func ParseCIDRs

```go
func ParseCIDRs(cidrs []string) ([]*net.IPNet, error)
```

ParseCIDRs shortcut for easy converting CIDR\(s\) string slice to net\.IPNet slice

## func ServerPeerWhitelist

```go
func ServerPeerWhitelist(whitelist []*net.IPNet) grpc.UnaryServerInterceptor
```

ServerPeerWhitelist provides server client whitelist by CIDR\(s\)

<details><summary>Example</summary>
<p>

```go
{
	whitelistNetworks, err := ParseCIDRs([]string{
		"127.0.0.1/24",
	})

	if err != nil {
		log.Fatalln("")
	}

	grpcServer := grpc.NewServer(
		grpc.ChainUnaryInterceptor(
			ServerPeerWhitelist(whitelistNetworks),
		),
	)
	fmt.Println(grpcServer)

}
```

</p>
</details>

# token\_auth

```go
import "github.com/golang-pkgz/grpc_boilerplate/token_auth"
```

## Index

- [Constants](<#constants>)
- [func ClientTokenAuth(apiToken string, apiTokenHeaderName string) grpc.UnaryClientInterceptor](<#func-clienttokenauth>)
- [func ServerTokenAuth(apiToken string, apiTokenHeaderName string) grpc.UnaryServerInterceptor](<#func-servertokenauth>)


## Constants

DefaultApiTokenHeaderName used if apiTokenHeaderName is empty string

```go
const DefaultApiTokenHeaderName = "api_token"
```

## func ClientTokenAuth

```go
func ClientTokenAuth(apiToken string, apiTokenHeaderName string) grpc.UnaryClientInterceptor
```

ClientTokenAuth provides token header for authentication

<details><summary>Example</summary>
<p>

Example client with token auth

```go
{
	conn, err := grpc.Dial(
		"localhost:50002",
		grpc.WithBlock(),
		grpc.WithInsecure(),
		grpc.WithUnaryInterceptor(ClientTokenAuth(
			"secret_token",
			"<header name or empty for default>",
		)),
	)
	if err != nil {
		log.Fatalf("dial failed: %s", err.Error())
	}
	defer conn.Close()

}
```

</p>
</details>

## func ServerTokenAuth

```go
func ServerTokenAuth(apiToken string, apiTokenHeaderName string) grpc.UnaryServerInterceptor
```

ServerTokenAuth provides token header for authentication

<details><summary>Example</summary>
<p>

Example server with token auth

```go
{
	grpcServer := grpc.NewServer(
		grpc.ChainUnaryInterceptor(
			ServerTokenAuth(
				"secret_token",
				"<header name or empty for default>",
			),
		),
	)
	fmt.Println(grpcServer)
}
```

</p>
</details>



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
